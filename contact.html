<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Contact - Arti, a Web Development Intern</title>
    <link rel="stylesheet" href="/styles/reset.css" />
    <link rel="stylesheet" href="/styles/contact.css" />
    <link rel="stylesheet" href="/styles/shared.css"/>
    <meta
      name="description"
      content="Lorem ipsum dolor sit amet consectetur adipisicing elit. 
    Eligendi dolor reiciendis corrupti tempore officiis molestias eveniet alias? "
    />
    <meta name="keywords" content="html, css, javascript, intern, SWE, contact page" />
    <link rel="shortcut icon" type="image/ico" href="./resources/favicon/favicon.ico" />
  </head>
  <body>
    <header class="contact_header">
      <h1>Contact me</h1>
    </header>
    <nav class="contact_navbar">
      <ul>
        <li>
          <a class="button" href="/index.html" title="Introduction">Introduction</a>
        </li>
        <li><a class="button" href="/about.html" title="About">About</a></li>
      </ul>
    </nav>
    <main class="contact_main">
      <section class="form_section">
        <h2>Contact form</h2>
        <form id="form_element">
          <div class="form_text" id="form_box">
            <label for="t1">Please give us Your e-mail.</label>
            <br />
            <input type="text" id="t1" placeholder="E-mail" id="form_e-mail" required />
          </div>
          <div class="form_text" id="form_box">
            <label>By what name may I call You by?</label>
            <br />
            <input type="text" id="t2" placeholder="Name" required />
          </div>
          <div class="form_radio" id="form_box">
            <label for="reason_for_contact">Tell me about the reason You're contacting me.</label>
            <br />
            <input type="radio" name="reason_for_contact" value="freelance-gig" id="r1" required />
            <label for="r1">Freelance-gig</label>
            <br />
            <input type="radio" name="reason_for_contact" value="invite_to_swimming" id="r2" required />
            <label for="r2">An invite to go swimming</label>
            <br />
            <input type="radio" name="reason_for_contact" value="website-bug" id="r3" required />
            <label for="r3">Reporting a bug</label>
          </div>
          <div class="form_select" id="form_box">
            <label for="area">From where are You contacting me (statistics)?</label>
            <br />
            <select id="area" name="country" required aria-placeholder="Choose">
              <option value="" disabled selected>Select Your option</option>
              <option value="america">North-America or South-America</option>
              <option value="asia">Asia</option>
              <option value="europe">Europe</option>
              <option value="elsewhere">Somewhere else</option>
            </select>
          </div>
          <div class="form_checkbox" id="form_box">
            <label for="c1">
              <p>Do You agree with the current GDPR practices?</p>
              <div class="checkbox_div">
                <input type="checkbox" id="c1" name="gdpr-agreement" required />
                <span>I agree</span>
                <span class="checkmark"></span>
              </div>
            </label>
          </div>
          <div class="form_submit_button">
            <button type="submit" class="button" id="form_submit_button">Submit</button>
          </div>
        </form>
      </section>
    </main>
    <footer>
      <p>Â© 2023 Bitropia, All Rights Reserved</p>
    </footer>
    <script>
      //Function to submit form
      const form = document.getElementById('form_element');
      const submitButton = document.getElementById('form_submit_button');

      form.addEventListener("submit", (event) => {
        event.preventDefault();

        if (form.checkValidity) {
          const formData = new FormData();

          //appending data
          formData.append('e-mail', document.getElementById('t1').value);
          formData.append('name', document.getElementById('t2').value);
          formData.append('reason-for-contact', document.querySelector('input[name=reason_for_contact]:checked').value);
          formData.append('area', document.getElementById('area').value);
          formData.append('GDPR-agreement', document.getElementById('c1').value);

          fetch('https://app.headlessforms.cloud/api/v1/form-submission/ewZmObXSuw', {
            method: 'POST',
            body: formData,
          })
            .then((response) => {
              if (response.ok) {
                window.location.href = './thanks.html';
              } else {
                alert(new Error());
              }
            })
            .catch((error) => {
              // https://app.headlessforms.cloud/api/v1/form-submission/ewZmObXSuwjdshiudh9839289
              console.log(error);
            });
        }
      });
    </script>
  </body>
</html>
